<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡‘é¦¬å‚³èªª - 1-48 éš¨æ©Ÿæ‹‰éœ¸</title>
    <style>
        :root {
            --chrome: linear-gradient(145deg, #e6e6e6, #999);
            --gold-glow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        body {
            background: #0a0a0a;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif;
        }

        /* æ ¸å¿ƒé¦¬é ­å®¹å™¨ */
        .game-wrapper {
            position: relative;
            width: 800px;
            height: 800px;
            /* è«‹å°‡æ­¤è™•é€£çµæ›¿æ›ç‚ºä½ å¯¦éš›çš„é¦¬é ­åœ–ç‰‡è·¯å¾‘ */
            background: url('https://img.freepik.com/free-photo/shiny-metal-horse-statue-casino_23-2151126162.jpg') no-repeat center center;
            background-size: contain;
        }

        /* æ‹‰éœ¸æ•¸å­—å€ï¼šç²¾ç¢ºå®šä½åœ¨é¦¬å˜´ä½ç½® */
        .mouth-slot {
            position: absolute;
            top: 58%; /* æ ¹æ“šåœ–ç‰‡å¾®èª¿æ­¤åº§æ¨™ */
            left: 48%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 8px;
            padding: 10px;
            background: rgba(0,0,0,0.8);
            border: 2px solid #ffd700;
            border-radius: 5px;
            box-shadow: var(--gold-glow);
        }

        .digit-box {
            width: 60px;
            height: 90px;
            background: #fff;
            color: #000;
            font-size: 60px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 4px;
            overflow: hidden;
        }

        /* 3D ç«‹é«”æ‹‰æ¡¿è¨­è¨ˆ */
        .lever-system {
            position: absolute;
            right: 50px;
            top: 350px;
            width: 100px;
            height: 300px;
            cursor: pointer;
            z-index: 10;
        }

        .lever-arm {
            width: 12px;
            height: 180px;
            background: var(--chrome);
            margin: 0 auto;
            border-radius: 6px;
            transform-origin: bottom center;
            transition: transform 0.3s cubic-bezier(0.45, 0.05, 0.55, 0.95);
            position: relative;
        }

        .lever-ball {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 30% 30%, #ff4d4d, #800000);
            border-radius: 50%;
            position: absolute;
            top: -50px;
            left: -24px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.6);
        }

        .lever-base {
            width: 40px;
            height: 40px;
            background: #222;
            margin: -10px auto;
            border-radius: 50%;
        }

        /* å‹•ç•«é¡åˆ¥ */
        .pull-active { transform: rotateX(70deg) translateY(50px); }
        .blur-anim { animation: fast-roll 0.1s infinite; }

        @keyframes fast-roll {
            0% { transform: translateY(-10px); filter: blur(3px); }
            100% { transform: translateY(10px); filter: blur(3px); }
        }

        h2 { position: absolute; top: 20px; color: #ffd700; text-shadow: 0 0 10px #000; }
    </style>
</head>
<body>

    <h2>ğŸ GOLDEN CHANCE GALLOP</h2>

    <div class="game-wrapper">
        <div class="mouth-slot">
            <div id="d1" class="digit-box">0</div>
            <div id="d2" class="digit-box">0</div>
            <div id="d3" class="digit-box">0</div>
        </div>

        <div class="lever-system" onclick="spin()">
            <div id="arm" class="lever-arm">
                <div class="lever-ball"></div>
            </div>
            <div class="lever-base"></div>
        </div>
    </div>

    <audio id="sound-neigh" src="https://actions.google.com/sounds/v1/animals/horse_whinny.ogg"></audio>
    <audio id="sound-gallop" src="https://actions.google.com/sounds/v1/foley/horse_gallop.ogg" loop></audio>
    <audio id="sound-win" src="https://actions.google.com/sounds/v1/animals/horse_neigh.ogg"></audio>

    <script>
        const d1 = document.getElementById('d1');
        const d2 = document.getElementById('d2');
        const d3 = document.getElementById('d3');
        const arm = document.getElementById('arm');
        
        const sndNeigh = document.getElementById('sound-neigh');
        const sndGallop = document.getElementById('sound-gallop');
        const sndWin = document.getElementById('sound-win');

        let isRunning = false;

        function spin() {
            if (isRunning) return;
            isRunning = true;

            // 1. ä¸‹æ‹‰å‹•ä½œ + åˆå§‹é¦¬é³´
            arm.classList.add('pull-active');
            sndNeigh.play();

            setTimeout(() => {
                arm.classList.remove('pull-active');
                
                // 2. é–‹å§‹æ»¾å‹• + é¦¬è¹„è²
                sndGallop.play();
                d1.classList.add('blur-anim');
                d2.classList.add('blur-anim');
                d3.classList.add('blur-anim');

                // ç”¢ç”Ÿ 1-48 éš¨æ©Ÿæ•¸
                const finalNum = Math.floor(Math.random() * 48) + 1;
                const str = finalNum.toString().padStart(3, '0');

                // 3. ä¾åºåœæ­¢ (å·¦ -> ä¸­ -> å³)
                setTimeout(() => stopDigit(d1, str[0]), 1200);
                setTimeout(() => stopDigit(d2, str[1]), 2000);
                setTimeout(() => {
                    stopDigit(d3, str[2]);
                    finish();
                }, 2800);

            }, 400);
        }

        function stopDigit(el, val) {
            el.classList.remove('blur-anim');
            el.innerText = val;
        }

        function finish() {
            sndGallop.pause();
            sndGallop.currentTime = 0;
            sndWin.volume = 1.0;
            sndWin.play(); // éŸ¿äº®çš„çµæŸé³´å«
            isRunning = false;
        }
    </script>
</body>
</html>