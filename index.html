<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡‘é¦¬å‚³èªª - 1-48 éš¨æ©Ÿæ‹‰éœ¸</title>
    <style>
        :root {
            --chrome: linear-gradient(145deg, #e6e6e6, #999);
            --gold-glow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        body {
            background: #0a0a0a;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }

        /* æ ¸å¿ƒé¦¬é ­å®¹å™¨ */
        .game-wrapper {
            position: relative;
            width: 800px;
            height: 800px;
            background: url('horse.png') no-repeat center center;
            background-size: contain;
        }

        /* æ‹‰éœ¸æ•¸å­—å€ï¼šç²¾ç¢ºå®šä½åœ¨é¦¬å˜´ä½ç½® */
        .mouth-slot {
            position: absolute;
            top: 72%; 
            left: 55%;
            transform: translate(-50%, -50%) scale(1.5); 
            display: flex;
            gap: 8px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.85);
            border: 3px solid #ffd700;
            border-radius: 8px;
            box-shadow: var(--gold-glow);
            z-index: 5;
        }

        .digit-box {
            width: 60px;
            height: 90px;
            background: linear-gradient(to bottom, #fff 0%, #ddd 50%, #fff 100%);
            color: #000;
            font-size: 60px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }

        /* 3D ç«‹é«”æ‹‰æ¡¿è¨­è¨ˆ */
        .lever-system {
            position: absolute;
            right: 80px;
            top: 320px;
            width: 100px;
            height: 300px;
            cursor: pointer;
            z-index: 10;
        }

        .lever-arm {
            width: 14px;
            height: 200px;
            background: var(--chrome);
            margin: 0 auto;
            border-radius: 7px;
            transform-origin: bottom center;
            transition: transform 0.2s cubic-bezier(0.45, 0.05, 0.55, 0.95);
            position: relative;
            box-shadow: 2px 0 5px rgba(0,0,0,0.3);
        }

        .lever-ball {
            width: 65px;
            height: 65px;
            background: radial-gradient(circle at 30% 30%, #ff4d4d, #800000);
            border-radius: 50%;
            position: absolute;
            top: -55px;
            left: -25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.7);
        }

        .lever-base {
            width: 46px;
            height: 46px;
            background: #222;
            margin: -15px auto;
            border-radius: 50%;
            border: 2px solid #444;
        }

        /* å‹•ç•«é¡åˆ¥ */
        .pull-active { transform: rotateX(65deg) scaleY(0.6); }
        .blur-anim { animation: fast-roll 0.1s infinite; }

        @keyframes fast-roll {
            0% { transform: translateY(-8px); filter: blur(4px); opacity: 0.8; }
            100% { transform: translateY(8px); filter: blur(4px); opacity: 0.8; }
        }

        h2 { 
            margin-bottom: 10px;
            color: #ffd700; 
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            letter-spacing: 3px;
        }
    </style>
</head>
<body>

    <h2>ğŸ GOLDEN CHANCE GALLOP</h2>

    <div class="game-wrapper">
        <div class="mouth-slot">
            <div id="d1" class="digit-box">0</div>
            <div id="d2" class="digit-box">0</div>
            <div id="d3" class="digit-box">0</div>
        </div>

        <div class="lever-system" onclick="spin()">
            <div id="arm" class="lever-arm">
                <div class="lever-ball"></div>
            </div>
            <div class="lever-base"></div>
        </div>
    </div>

    <audio id="sound-neigh" src="neigh.mp3"></audio>
    <audio id="sound-gallop" src="gallop.mp3" loop></audio>
    <audio id="sound-win" src="win.mp3"></audio>

    <script>
        const d1 = document.getElementById('d1');
        const d2 = document.getElementById('d2');
        const d3 = document.getElementById('d3');
        const arm = document.getElementById('arm');
        
        const sndNeigh = document.getElementById('sound-neigh');
        const sndGallop = document.getElementById('sound-gallop');
        const sndWin = document.getElementById('sound-win');

        let isRunning = false;

        function spin() {
            if (isRunning) return;
            isRunning = true;

            // 1. ä¸‹æ‹‰å‹•ä½œ
            arm.classList.add('pull-active');
            
            sndNeigh.currentTime = 0;
            sndNeigh.play().catch(e => console.log("éŸ³æ•ˆæ’­æ”¾è¢«é˜»æ“‹"));

            setTimeout(() => {
                arm.classList.remove('pull-active');
                
                // 2. é–‹å§‹æ»¾å‹•
                sndGallop.currentTime = 0;
                sndGallop.play();
                
                d1.classList.add('blur-anim');
                d2.classList.add('blur-anim');
                d3.classList.add('blur-anim');

                const finalNum = Math.floor(Math.random() * 48) + 1;
                const str = finalNum.toString().padStart(3, '0');

                // --- ä¿®æ”¹é€™è£¡çš„æ™‚é–“é» ---
                // ç¬¬ä¸€ä½æ•¸ï¼š1.5ç§’å¾Œåœ (1500ms)
                setTimeout(() => stopDigit(d1, str[0]), 1500);
                
                // ç¬¬äºŒä½æ•¸ï¼š2.2ç§’å¾Œåœ (2200ms)
                setTimeout(() => stopDigit(d2, str[1]), 2200);
                
                // ç¬¬ä¸‰ä½æ•¸ï¼š3.0ç§’å¾Œåœ (3000ms)
                setTimeout(() => {
                    stopDigit(d3, str[2]);
                    finish();
                }, 3000);

            }, 400);
        }

        function stopDigit(el, val) {
            el.classList.remove('blur-anim');
            el.innerText = val;
        }

        function finish() {
            sndGallop.pause();
            sndWin.currentTime = 0;
            sndWin.volume = 1.0;
            sndWin.play();
            isRunning = false;
        }
    </script>
</body>
</html>
